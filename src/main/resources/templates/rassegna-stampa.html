<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/header :: header}"></head>

<body>
    <!-- Navbar Fragment -->
    <nav th:replace="~{fragments/navbar :: navbar('press')}"></nav>

    <main>
        <!-- Hero Section -->
        <section class="press-hero-section">
            <div class="hero-overlay-finance"></div>
            <div class="hero-content-press">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-10 text-center">
                            <h1 class="press-hero-title animate__animated animate__fadeInUp">
                                Rassegna Stampa
                            </h1>
                            <p class="press-hero-subtitle animate__animated animate__fadeInUp animate__delay-1s">
                                Le ultime notizie e articoli che parlano di noi
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Blog Posts Section -->
        <section class="press-posts-section py-5">
            <div class="container py-4">
                
                <!-- Empty State -->
                <div th:if="${#lists.isEmpty(posts)}" class="empty-state text-center py-5">
                    <div class="empty-icon mb-4">
                        <i class="bi bi-newspaper"></i>
                    </div>
                    <h3 class="empty-title">Nessun articolo disponibile</h3>
                    <p class="empty-text">Al momento non ci sono articoli pubblicati.</p>
                </div>

                <!-- Posts Grid -->
                <div th:unless="${#lists.isEmpty(posts)}" class="row g-4">
                    <div class="col-lg-4 col-md-6" th:each="post : ${posts}">
                        <article class="press-card h-100">
                            <!-- Image -->
                            <div class="press-card-image" th:if="${post.hasImage()}">
                                <img th:src="@{${post.imageUrl}}" 
                                     th:alt="${post.title}"
                                     loading="lazy">
                                <div class="press-card-overlay"></div>
                            </div>
                            
                            <!-- No Image Placeholder -->
                            <div class="press-card-image press-card-no-image" th:unless="${post.hasImage()}">
                                <i class="bi bi-newspaper"></i>
                            </div>

                            <!-- Content -->
                            <div class="press-card-body">
                                <!-- Meta -->
                                <div class="press-card-meta">
                                    <span class="press-source" th:if="${post.sourceName}">
                                        <i class="bi bi-building me-1"></i>
                                        <span th:text="${post.sourceName}">Fonte</span>
                                    </span>
                                    <span class="press-date">
                                        <i class="bi bi-calendar3 me-1"></i>
                                        <span th:text="${#temporals.format(post.publishedDate, 'dd MMM yyyy')}">Data</span>
                                    </span>
                                </div>

                                <!-- Title -->
                                <h3 class="press-card-title">
                                    <a th:href="@{/blog/{id}(id=${post.id})}" th:text="${post.title}">
                                        Titolo dell'articolo
                                    </a>
                                </h3>

                                <!-- Excerpt -->
                                <p class="press-card-excerpt" th:text="${post.getExcerpt(150)}">
                                    Estratto dell'articolo che viene mostrato nella card...
                                </p>

                                <!-- Footer -->
                                <div class="press-card-footer">
                                    <a th:href="@{/blog/{id}(id=${post.id})}" class="press-read-more">
                                        Leggi articolo <i class="bi bi-arrow-right ms-2"></i>
                                    </a>
                                    
                                    <!-- External Link -->
                                    <a th:if="${post.hasExternalLink()}" 
                                       th:href="${post.externalLink}" 
                                       target="_blank" 
                                       rel="noopener noreferrer"
                                       class="press-external-link"
                                       title="Vai alla fonte originale">
                                        <i class="bi bi-box-arrow-up-right"></i>
                                    </a>
                                </div>
                            </div>
                        </article>
                    </div>
                </div>

                <!-- Pagination -->
                <nav th:if="${totalPages > 1}" aria-label="Navigazione pagine" class="mt-5">
                    <ul class="pagination justify-content-center">
                        <!-- Previous -->
                        <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                            <a class="page-link" 
                               th:href="@{/blog(page=${currentPage - 1})}"
                               th:if="${currentPage > 0}">
                                <i class="bi bi-chevron-left"></i> Precedente
                            </a>
                            <span class="page-link" th:if="${currentPage == 0}">
                                <i class="bi bi-chevron-left"></i> Precedente
                            </span>
                        </li>

                        <!-- Page Numbers -->
                        <li class="page-item" 
                            th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
                            th:if="${i >= currentPage - 2 && i <= currentPage + 2}"
                            th:classappend="${i == currentPage} ? 'active'">
                            <a class="page-link" 
                               th:href="@{/blog(page=${i})}"
                               th:text="${i + 1}">1</a>
                        </li>

                        <!-- Next -->
                        <li class="page-item" th:classappend="${currentPage == totalPages - 1} ? 'disabled'">
                            <a class="page-link" 
                               th:href="@{/blog(page=${currentPage + 1})}"
                               th:if="${currentPage < totalPages - 1}">
                                Successivo <i class="bi bi-chevron-right"></i>
                            </a>
                            <span class="page-link" th:if="${currentPage == totalPages - 1}">
                                Successivo <i class="bi bi-chevron-right"></i>
                            </span>
                        </li>
                    </ul>
                </nav>
            </div>
        </section>

        <!-- Testimonials CTA Section -->
        <section class="press-testimonials-cta py-5">
            <div class="container py-4">
                <div class="row align-items-center">
                    <div class="col-lg-8 mb-4 mb-lg-0">
                        <h2 class="cta-testimonials-title mb-3">
                            <i class="bi bi-chat-quote me-3"></i>
                            Dicono di Noi
                        </h2>
                        <p class="cta-testimonials-text mb-0">
                            Scopri cosa dicono i nostri clienti e partner sulla loro esperienza con Hicman Capital Partner
                        </p>
                    </div>
                    <div class="col-lg-4 text-lg-end">
                        <a href="/blog/testimonials" class="btn btn-finance-primary btn-lg">
                            Vai alle Testimonianze <i class="bi bi-arrow-right ms-2"></i>
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer Fragment -->
    <footer th:replace="~{fragments/footer :: footer}"></footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>